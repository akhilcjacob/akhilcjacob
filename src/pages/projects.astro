---
import { Icon } from "astro-icon/components";
import GradientText from "../components/ui/GradientText.astro";
import BasicLayout from "../layouts/BasicLayout.astro";
import "../styles/projects.css";

interface Project {
  title: string;
  description?: string;
  appUrl?: string;
  landingPageUrl: string;
  screenshots: string[];
  videoUrl?: string;
  categories: string[];
  imageOpacity?: number;
  type: "web" | "mobile";
}

interface ProjectPair {
  name: string;
  projects: Project[];
  type: "web" | "mobile";
}

// Utility function to get YouTube video ID
function getYouTubeVideoId(url: string): string | null {
  const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
  const match = url.match(regExp);
  return match && match[2].length === 11 ? match[2] : null;
}

const projectsData: ProjectPair[] = [
  {
    name: "HypeBridge",
    type: "web",
    projects: [
      {
        title: "HypeBridge",
        description: "Revolutionary AI-powered platform that automates end-to-end influencer marketing campaigns, leveraging advanced AI agents for unprecedented efficiency and reach.",
        landingPageUrl: "https://thehypebridge.com",
        screenshots: ["https://thehypebridge.com/og-image.png"],
        videoUrl: "https://youtu.be/7TFqc2ty8yI",
        categories: ["web", "AI", "Marketing"],
        type: "web",
      }
    ],
  },
  {
    name: "inboxhiiv",
    type: "web",
    projects: [
      {
        title: "inboxhiiv",
        description: "Cutting-edge AI system that transforms podcast episodes into comprehensive newsletters, featuring intelligent summaries, chapter breakdowns, and key takeaways - all automated and delivered fresh to your inbox.",
        appUrl: "https://inboxhiiv.com",
        landingPageUrl: "https://inboxhiiv.com",
        screenshots: ["https://inboxhiiv.com/screenshots/dashboard.png"],
        categories: ["web", "AI", "Podcasts"],
        type: "web",
      }
    ],
  },
  {
    name: "Nookly",
    type: "mobile",
    projects: [
      {
        title: "Nookly",
        description: "Innovative Uber-style platform revolutionizing home services, connecting homeowners with skilled professionals for seamless, on-demand home maintenance and improvement.",
        appUrl: "https://nookly.co",
        landingPageUrl: "https://nookly.co",
        screenshots: ["/images/nookly_screenshot.png"],
        categories: ["mobile", "Services"],
        type: "mobile",
      }
    ],
  },
  {
    name: "Skywise",
    type: "mobile",
    projects: [
      {
        title: "Skywise",
        description: "Conversational AI weather app with dynamic forecasts and natural language interactions.",
        appUrl: "https://modrnmagic.app",
        landingPageUrl: "https://modrnmagic.app",
        screenshots: ["/images/skywise.png"],
        categories: ["mobile", "AI", "Weather"],
        type: "mobile",
      }
    ],
  }
];

const otherProjects = [
  {
    title: "Astro Defender",
    description: "An engaging mobile game built with Flutter, featuring dynamic gameplay mechanics, particle effects, and real-time physics. Developed to explore advanced mobile development concepts and game design principles.",
    tech: "Flutter, Flame Engine",
    icon: "ri:gamepad-line",
    link: "https://modrnmagic.app",
  },
  {
    title: "Flowomoro",
    description: "A beautifully designed Pomodoro timer that enhances productivity through an intuitive interface. Features customizable work sessions, break intervals, and detailed analytics to track your productivity patterns.",
    tech: "Flutter, Provider",
    icon: "ri:timer-line",
    link: "https://modrnmagic.app/apps/flowmoro/home",
  },
  {
    title: "Dive Deeper on GitHub",
    description: "Uncover a treasure trove of projects ranging from parallel reinforcement learning, real-time financial tools, and cutting-edge autonomous systems.",
    tech: "Python, Java, JavaScript, Shell, and more",
    icon: "ri:github-line",
    link: "https://github.com/akhilcjacob",
  }
];

// Hardcoded list for landing page marquee
const landingPages = [
  {
    url: "/images/modrn.png",
    name: "Skywise",
    type: "web",
    appUrl: "https://modrnmagic.app/",
  },
  {
    url: "/images/inboxhiiv_landing.png",
    name: "inboxhiiv",
    type: "web",
    appUrl: "https://inboxhiiv.com",
  },
  {
    url: "/images/flowmoro_landing.png",
    name: "Flowmoro",
    type: "web",
    appUrl: "https://modrnmagic.app/apps/flowmoro/home/",
  },
  {
    url: "https://thehypebridge.com/og-image.png",
    name: "HypeBridge",
    type: "web",
    appUrl: "https://thehypebridge.com",
  },
];

const landingPagesLoop = [...landingPages, ...landingPages];

const pageTitle = "Projects & Portfolio - Akhil Jacob";
const pageDescription = "Explore my portfolio of software engineering projects, including web applications, mobile apps, and innovative solutions. See how I've applied my expertise in full-stack development, AI, and scalable systems.";

---

<BasicLayout 
  title={pageTitle}
  description={pageDescription}
  page="projects"
>
  <div class="relative min-h-screen w-full overflow-y-auto">
    <!-- Background effect -->
    <div class="fixed inset-0 z-0">
      <div
        class="absolute inset-0 bg-[radial-gradient(ellipse_80%_80%_at_50%_-20%,rgba(65,105,225,0.3),rgba(30,144,255,0.15),rgba(10,10,10,0.95))]"
      >
      </div>
    </div>

    <div class="container mx-auto px-4 py-16 relative z-10">
      <!-- Intro Section -->
      <section class="py-16">
        <div class="glass-card-lg backdrop-blur-md p-8 rounded-3xl">
          <div class="flex flex-col md:flex-row items-center gap-8">
            <div class="w-32 h-32 md:w-48 md:h-48 relative">
              <img
                src="/me.jpeg"
                alt="Akhil Jacob"
                class="rounded-full w-full h-full object-cover"
              />
            </div>
            <div class="flex-1">
              <h1 class="text-4xl md:text-5xl font-bold mb-4 text-white">
                Hi, I'm <GradientText>Akhil Jacob</GradientText>
              </h1>
              <p class="text-lg text-gray-300 mb-6">
                A passionate software engineer focused on building innovative solutions
                that push the boundaries of what's possible. Here's a showcase of my
                recent projects that demonstrate my expertise in web and mobile
                development.
              </p>
              <a 
                href="/" 
                class="inline-block px-6 py-3 bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 rounded-full transition-colors"
              >
                View Full Profile â†’
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- Marquee Section -->
      <section class="py-16">
        <div class="relative mb-12">
          <h2 class="text-3xl md:text-4xl font-bold text-white text-center">
            Featured Project Previews
            <div class="h-1 w-48 bg-gradient-to-r from-transparent via-blue-400 to-transparent mx-auto mt-4"></div>
          </h2>
        </div>
        <div class="h-80 overflow-hidden">
          <div class="h-10"></div>
          <div class="marquee-container h-100 w-100">
            <div class="marquee marquee-landing ">
              {
                landingPagesLoop.map((item) => (
                  <a
                    href={item.appUrl}
                    target="_blank"
                    class="marquee-item-landing"
                  >
                    <div class="landing-image-container">
                      <img
                        src={item.url}
                        alt={`${item.name} landing page`}
                        class="rounded-xl shadow-2xl"
                      />
                      <div class="marquee-overlay glass-card backdrop-blur-md rounded-3xl">
                        <span class="text-lg font-medium text-white">{item.name}</span>
                      </div>
                    </div>
                  </a>
                ))
              }
            </div>
          </div>
        </div>
      </section>

      <!-- Projects Grid -->
      <section class="py-16">
        <div class="relative mb-12">
          <h2 class="text-3xl md:text-4xl font-bold text-white text-center">
            Portfolio
            <div class="h-1 w-48 bg-gradient-to-r from-transparent via-purple-400 to-transparent mx-auto mt-4"></div>
          </h2>
        </div>
        <div class="grid grid-cols-1 gap-16">
          {
            projectsData.map((projectPair) => (
              <div class="project-showcase">
                <h3 class="text-3xl font-bold text-white mb-8">
                  {projectPair.name}
                </h3>
                {projectPair.projects.map((project) => (
                  <div class="glass-card-lg p-8 rounded-3xl hover:scale-[1.01] transition-transform mb-8 bg-white/5">
                    <div class="flex flex-col lg:flex-row gap-8">
                      <div class="lg:w-1/2">
                        <h4 class="text-2xl font-semibold mb-4 text-white">
                          {project.title}
                        </h4>
                        {project.description && (
                          <p class="text-gray-300 mb-6">{project.description}</p>
                        )}
                        <div class="flex flex-wrap gap-2 mb-6">
                          {project.categories.map((category) => (
                            <span class="px-3 py-1 bg-blue-500/20 rounded-full text-sm text-blue-300">
                              {category}
                            </span>
                          ))}
                        </div>
                        <div class="flex gap-4">
                          <a
                            href={project.landingPageUrl}
                            target="_blank"
                            class="inline-flex items-center gap-2 px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 rounded-full transition-colors"
                          >
                            <Icon name="ri:external-link-line" class="w-4 h-4" />
                            View Project
                          </a>
                          {project.videoUrl && (
                            <a
                              href={project.videoUrl}
                              target="_blank"
                              class="inline-flex items-center gap-2 px-4 py-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-300 rounded-full transition-colors"
                            >
                              <Icon name="ri:youtube-line" class="w-4 h-4" />
                              Watch Demo
                            </a>
                          )}
                        </div>
                      </div>
                      <div class="lg:w-1/2">
                        {project.type === 'mobile' ? (
                          <div class="max-w-[300px] mx-auto p-4">
                            <div class="relative aspect-[9/19] rounded-3xl overflow-hidden ">
                              <img
                                src={project.screenshots[0]}
                                alt={project.title}
                                class="w-full h-full object-contain"
                                style={`opacity: ${project.imageOpacity || 1}`}
                              />
                            </div>
                          </div>
                        ) : (
                          <div class="relative aspect-video rounded-xl overflow-hidden">
                            <img
                              src={project.screenshots[0]}
                              alt={project.title}
                              class="w-full h-full object-cover"
                              style={`opacity: ${project.imageOpacity || 1}`}
                            />
                          </div>
                        )}
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            ))
          }
        </div>
      </section>

      <!-- Other Projects -->
      <section class="py-16">
        <div class="relative mb-12">
          <h2 class="text-3xl md:text-4xl font-bold text-white text-center">
            Other Projects
            <div class="h-1 w-48 bg-gradient-to-r from-transparent via-green-400 to-transparent mx-auto mt-4"></div>
          </h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {otherProjects.map((project) => (
            <a
              href={project.link}
              target="_blank"
              class="glass-card-lg p-8 rounded-3xl hover:scale-[1.01] transition-transform bg-white/5 flex flex-col"
            >
              <div class="flex items-center gap-3 mb-4">
                <Icon name={project.icon} class="w-6 h-6 text-blue-400" />
                <h3 class="text-xl font-semibold text-white">{project.title}</h3>
              </div>
              <p class="text-gray-300 mb-4 flex-1">{project.description}</p>
              <div class="text-sm text-blue-300">{project.tech}</div>
            </a>
          ))}
        </div>
      </section>
    </div>
  </div>
</BasicLayout>
